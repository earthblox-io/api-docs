# Creating a map layer

 In order to complete any of the requests in these tutorials, a bearer token is required. See the [Authentication page](../README%20Authentication.md) for more details on how to generate one. 

Links to the reference docs can be found throughout this tutorial.

## Get map layers 

The map layers for a specified run can be retrieved with the following request:

```bash
curl --location 'https://dev.api.earthblox.io/api/alpha/runs/{run_id}/layers' \
--header 'Authorization: Bearer %BEARER_TOKEN%'
```

[Get map outputs reference](https://dev.api.earthblox.io/docs#/runs/get_run_layers_api_alpha_runs__run_id__layers_get)


The results of this request can be taken and used to display the map tiles elsewhere with the `mapURL` and `bbox`. 

Please note the mapURLs generated by this requested will expire after ~24hrs. 

## Using layers in web maps
### OpenLayers

The openLayers [documentation](https://openlayers.org/doc/quickstart.html) explains how to set up a basic web map. 

Once you have a web map set up the `mapURL` obtained from the API can be used as a `TileLayer` while the `bbox` can be used to set the `extent`, see the examples below.

```javascript
new TileLayer({
      source: %mapURL%,
    }),
```

```javascript
new View({
      extent: %bbox%
    }),
```

### Leaflet 

The Leaflet [Quick Start Guide](https://leafletjs.com/examples/quick-start/) explains the steps required to create a basic web map. 

Similar to openLayers, once you have a webmap set up the `mapURL` can be used as a `tileLayer`, see the example below. 

```javascript
var map = L.map('map')
L.tileLayer('%mapURL%').addTo(map);
```

### Google Maps Platform Javascript API

There are several pre-requisities associated with using the map outputs with Google Maps. These include: 
1. A project with billing enabled and the `Maps JavaScript API` enabled. 
2. An API key associated with the account. 

See the [documentation](https://developers.google.com/maps/documentation/javascript/overview) on how to achieve this and create a basic web map. 

Once you have a web map set up, the `mapURL` can be used as an `ImageMapType` layer. See the example below. 

```javascript
const mapURL = '%mapURL'; 
const mapURLLayer = new google.maps.ImageMapType({
    getTileUrl: function (coord, zoom) {
        return mapURL.replace('{z}', zoom).replace('{x}', coord.x).replace('{y}', coord.y);
    },
    tileSize: new google.maps.Size(256, 256),
    maxZoom: 12,
    minZoom: 5,
});

map.overlayMapTypes.push(mapURLLayer);
```
